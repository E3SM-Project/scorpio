<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SCORPIO: examplePio.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SCORPIO<span id="projectnumber">&#160;1.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_993def18d968d2b79bf09d44cafc1f74.html">scorpio3</a></li><li class="navelem"><a class="el" href="dir_f44bca4dab16d5a56efea51a0507dc9f.html">examples</a></li><li class="navelem"><a class="el" href="dir_07d2ba4d6174d731a3976e4095a2322a.html">c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">examplePio.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A simple C example for the ParallelIO Library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;getopt.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;mpi.h&gt;</code><br />
<code>#include &lt;<a class="el" href="pio_8h_source.html">pio.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for examplePio.c:</div>
<div class="dyncontent">
<div class="center"><img src="example_pio_8c__incl.png" border="0" usemap="#aexample_pio_8c" alt=""/></div>
<map name="aexample_pio_8c" id="aexample_pio_8c">
<area shape="rect" title="A simple C example for the ParallelIO Library." alt="" coords="140,5,251,31"/>
<area shape="rect" title=" " alt="" coords="5,79,81,104"/>
<area shape="poly" title=" " alt="" coords="172,33,81,75,79,70,170,28"/>
<area shape="rect" title=" " alt="" coords="23,152,90,177"/>
<area shape="poly" title=" " alt="" coords="186,33,79,144,75,140,182,29"/>
<area shape="rect" title=" " alt="" coords="115,152,185,177"/>
<area shape="poly" title=" " alt="" coords="194,32,160,140,155,138,189,30"/>
<area shape="rect" title=" " alt="" coords="338,79,413,104"/>
<area shape="poly" title=" " alt="" coords="225,28,334,71,332,76,223,33"/>
<area shape="rect" title=" " alt="" coords="210,152,269,177"/>
<area shape="poly" title=" " alt="" coords="201,30,234,138,229,140,196,32"/>
<area shape="rect" href="pio_8h.html" title="Public headers for the PIO C interface." alt="" coords="259,79,313,104"/>
<area shape="poly" title=" " alt="" coords="212,29,262,68,259,72,208,33"/>
<area shape="poly" title=" " alt="" coords="259,104,104,151,103,146,258,99"/>
<area shape="poly" title=" " alt="" coords="265,106,185,148,183,143,263,102"/>
<area shape="poly" title=" " alt="" coords="281,106,257,142,252,139,276,103"/>
<area shape="rect" title=" " alt="" coords="618,152,701,177"/>
<area shape="poly" title=" " alt="" coords="314,98,327,101,464,127,605,149,604,154,463,132,325,107,313,103"/>
<area shape="rect" title=" " alt="" coords="293,152,364,177"/>
<area shape="poly" title=" " alt="" coords="295,103,317,139,313,142,291,106"/>
<area shape="rect" title=" " alt="" coords="388,152,488,177"/>
<area shape="poly" title=" " alt="" coords="312,102,402,144,400,149,309,106"/>
<area shape="rect" title=" " alt="" coords="512,152,593,177"/>
<area shape="poly" title=" " alt="" coords="314,98,327,101,499,147,498,152,325,107,313,103"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3ffb7abc07d01c194da2ee03e9f2a484" id="r_a3ffb7abc07d01c194da2ee03e9f2a484"><td class="memItemLeft" align="right" valign="top">typedef struct examplePioClass&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a3ffb7abc07d01c194da2ee03e9f2a484">examplePioClass</a></td></tr>
<tr class="memdesc:a3ffb7abc07d01c194da2ee03e9f2a484"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds code and data for this example.  <br /></td></tr>
<tr class="separator:a3ffb7abc07d01c194da2ee03e9f2a484"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a90fd12e7e718f6109d01c302bc2b16b7" id="r_a90fd12e7e718f6109d01c302bc2b16b7"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a90fd12e7e718f6109d01c302bc2b16b7">epc_init</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:a90fd12e7e718f6109d01c302bc2b16b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize libraries, create sample data.  <br /></td></tr>
<tr class="separator:a90fd12e7e718f6109d01c302bc2b16b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1d8c09f92e2658f4160ec6fa88f889b" id="r_ae1d8c09f92e2658f4160ec6fa88f889b"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#ae1d8c09f92e2658f4160ec6fa88f889b">epc_createDecomp</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:ae1d8c09f92e2658f4160ec6fa88f889b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the decomposition.  <br /></td></tr>
<tr class="separator:ae1d8c09f92e2658f4160ec6fa88f889b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeabd3d28ca00515fbc8c39e56bd5a01" id="r_aaeabd3d28ca00515fbc8c39e56bd5a01"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#aaeabd3d28ca00515fbc8c39e56bd5a01">epc_createFile</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:aaeabd3d28ca00515fbc8c39e56bd5a01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create the netCDF file.  <br /></td></tr>
<tr class="separator:aaeabd3d28ca00515fbc8c39e56bd5a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0e5c97ba9ed2d964affb8bd951d675" id="r_abc0e5c97ba9ed2d964affb8bd951d675"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#abc0e5c97ba9ed2d964affb8bd951d675">epc_defineVar</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:abc0e5c97ba9ed2d964affb8bd951d675"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define netCDF metadata.  <br /></td></tr>
<tr class="separator:abc0e5c97ba9ed2d964affb8bd951d675"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9875b83cce6a76ad1e55d97410ac4d2e" id="r_a9875b83cce6a76ad1e55d97410ac4d2e"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a9875b83cce6a76ad1e55d97410ac4d2e">epc_writeVar</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:a9875b83cce6a76ad1e55d97410ac4d2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the sample data to the file.  <br /></td></tr>
<tr class="separator:a9875b83cce6a76ad1e55d97410ac4d2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfe373d2faa04cd502508c82033d28b7" id="r_acfe373d2faa04cd502508c82033d28b7"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#acfe373d2faa04cd502508c82033d28b7">epc_readVar</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:acfe373d2faa04cd502508c82033d28b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the example data from the file.  <br /></td></tr>
<tr class="separator:acfe373d2faa04cd502508c82033d28b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceff73ec982ef25438fbc81a9382b44e" id="r_aceff73ec982ef25438fbc81a9382b44e"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#aceff73ec982ef25438fbc81a9382b44e">epc_closeFile</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:aceff73ec982ef25438fbc81a9382b44e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the netCDF file.  <br /></td></tr>
<tr class="separator:aceff73ec982ef25438fbc81a9382b44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01a985b4577290bdad475ac95e8ec7b" id="r_aa01a985b4577290bdad475ac95e8ec7b"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#aa01a985b4577290bdad475ac95e8ec7b">epc_cleanUp</a> (struct examplePioClass *this)</td></tr>
<tr class="memdesc:aa01a985b4577290bdad475ac95e8ec7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up allocated resources.  <br /></td></tr>
<tr class="separator:aa01a985b4577290bdad475ac95e8ec7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10245f0a9d6093174ee75ba1b8a62a4b" id="r_a10245f0a9d6093174ee75ba1b8a62a4b"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a10245f0a9d6093174ee75ba1b8a62a4b">epc_errorHandler</a> (struct examplePioClass *this, const char *errMsg, const int retVal)</td></tr>
<tr class="memdesc:a10245f0a9d6093174ee75ba1b8a62a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error handling function.  <br /></td></tr>
<tr class="separator:a10245f0a9d6093174ee75ba1b8a62a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f208f9220635e6aa1669bb63ff111a" id="r_a99f208f9220635e6aa1669bb63ff111a"><td class="memItemLeft" align="right" valign="top">struct examplePioClass *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a99f208f9220635e6aa1669bb63ff111a">epc_new</a> (int verbose)</td></tr>
<tr class="memdesc:a99f208f9220635e6aa1669bb63ff111a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an examplePioClass object.  <br /></td></tr>
<tr class="separator:a99f208f9220635e6aa1669bb63ff111a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97" id="r_a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example_pio_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main execution of code.  <br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple C example for the ParallelIO Library. </p>
<p>This example creates a netCDF output file with one dimension and one variable. It first writes, then reads the sample file using the ParallelIO library.</p>
<p>This example can be run in parallel for 1, 2, 4, 8, or 16 processors. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a3ffb7abc07d01c194da2ee03e9f2a484" name="a3ffb7abc07d01c194da2ee03e9f2a484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ffb7abc07d01c194da2ee03e9f2a484">&#9670;&#160;</a></span>examplePioClass</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct examplePioClass examplePioClass</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds code and data for this example. </p>
<p>This struct stores pointers to the functions used in the example, and all the data values needed to run the example code. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa01a985b4577290bdad475ac95e8ec7b" name="aa01a985b4577290bdad475ac95e8ec7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa01a985b4577290bdad475ac95e8ec7b">&#9670;&#160;</a></span>epc_cleanUp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_cleanUp </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clean up allocated resources. </p>
<p>This function frees the memory used in this example. It calls the ParallelIO library function PIOc_freedecomp() to free decomposition resources. Then calles PIOc_finalize() and MPI_finalize() to free library resources.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aceff73ec982ef25438fbc81a9382b44e" name="aceff73ec982ef25438fbc81a9382b44e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceff73ec982ef25438fbc81a9382b44e">&#9670;&#160;</a></span>epc_closeFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_closeFile </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the netCDF file. </p>
<p>Uses the PIOc_closefile() function to close the netCDF sample file written by this example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae1d8c09f92e2658f4160ec6fa88f889b" name="ae1d8c09f92e2658f4160ec6fa88f889b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1d8c09f92e2658f4160ec6fa88f889b">&#9670;&#160;</a></span>epc_createDecomp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_createDecomp </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the decomposition. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>Uses PIOc_InitDecomp() to initalize the decomposition for this example. The arguments are:</p><ul>
<li>the ID of the IO system, obtained from PIOc_init_intracomm().</li>
<li>the NetCDF type of the sample data - in this case a 4-byte integer.</li>
<li>the number of dimensions (1).</li>
<li>the lengths of the dimensions.</li>
<li>the number of data elements assigned to each processor.</li>
<li>the array which provides the decomposition mapping.</li>
<li>the IO description pointer.</li>
<li>the ParallelIO rearranger (we are providing NULL here to get the default arranger).</li>
<li>optional array of start values for block cyclic decompositions (NULL means don't use block cyclical decompositions).</li>
<li>optional array of count values for block cyclic decompositions (NULL means don't use block cyclical decompositions).</li>
</ul>
<p>The decomposition mapping array (called compdof, in this example code), contains a 1 based array of offsets into the array record on file. For this example, the compdof array will have the following sizes and values, depending on number of processors used.</p>
<p>For one processor the decomposition array looks like this (note that the array is 1-based):</p>
<pre>
rank: 0 length: 16 [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16]
</pre><p>For two processors, the decomposition array looks like this on each processor:</p>
<pre>
rank: 0 length: 8 [1, 2, 3, 4, 5, 6, 7, 8]
rank: 1 length: 8 [9, 10, 11, 12, 13, 14, 15, 16]
</pre><p>For four processors, the decomposition arrays are:</p>
<pre>
rank: 0 length: 4 [1, 2, 3, 4]
rank: 1 length: 4 [5, 6, 7, 8]
rank: 2 length: 4 [9, 10, 11, 12]
rank: 3 length: 4 [13, 14, 15, 16]
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaeabd3d28ca00515fbc8c39e56bd5a01" name="aaeabd3d28ca00515fbc8c39e56bd5a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaeabd3d28ca00515fbc8c39e56bd5a01">&#9670;&#160;</a></span>epc_createFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_createFile </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create the netCDF file. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>Uses the function PIOc_createfile() to create the netCDF output file. The format of the file is created in accordance with the iotype member variable, which specifies one of the following values:</p>
<ul>
<li>PIO_IOTYPE_PNETCDF=1 Parallel Netcdf (parallel)</li>
<li>PIO_IOTYPE_NETCDF=2 Netcdf3 Classic format (serial)</li>
<li>PIO_IOTYPE_NETCDF4C=3 NetCDF4 (HDF5) compressed format (serial)</li>
<li>PIO_IOTYPE_NETCDF4P=4 NetCDF4 (HDF5) parallel</li>
</ul>
<p>The PIOc_createfile() function has the following parameters:</p>
<ul>
<li>The IO system ID as set by PIOc_init_intracomm().</li>
<li>A pointer which will get the ncid of this file when it is created.</li>
<li>The iotype (one of the values listed above).</li>
<li>the name of the sample file.</li>
<li>the NetCDF file creating mode, PIO_CLOBBER means overwrite any existing file with this name.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abc0e5c97ba9ed2d964affb8bd951d675" name="abc0e5c97ba9ed2d964affb8bd951d675"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0e5c97ba9ed2d964affb8bd951d675">&#9670;&#160;</a></span>epc_defineVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_defineVar </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Define netCDF metadata. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>It defines a dimension and a one-dimensional variable in the netCDF file using functions PIOc_def_dim() and PIOc_def_var(). It then calls PIOc_enddef() to end the define mode of the file.</p>
<p>All of the functions take the pioFileDesc returned by PIOc_createfile(). This is the ncid of the netCDF file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a10245f0a9d6093174ee75ba1b8a62a4b" name="a10245f0a9d6093174ee75ba1b8a62a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10245f0a9d6093174ee75ba1b8a62a4b">&#9670;&#160;</a></span>epc_errorHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_errorHandler </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>errMsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>retVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Error handling function. </p>
<p>On error, process with rank zero will print error message, the netCDF file will be closed with PIOc_closefile(), and MPI_Abort is called to end the example execution on all processes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">errMsg</td><td>an error message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">retVal</td><td>the non-zero return value that indicated an error </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a90fd12e7e718f6109d01c302bc2b16b7" name="a90fd12e7e718f6109d01c302bc2b16b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90fd12e7e718f6109d01c302bc2b16b7">&#9670;&#160;</a></span>epc_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_init </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize libraries, create sample data. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>Ths funtion initializes MPI and the ParallelIO libraries. It sets up the ParallelIO library communicator. It also allocates memory for data used in this example, and assigns sample values to the data array that will be written.</p>
<p>The ParallelIO communicator is set up with a call to PIOc_Init_Intracomm(). This call takes the following parameters:</p>
<ul>
<li>The MPI communicator specifying the invovled processors (MPI_COMM_WORLD, in this case, to use all processors).</li>
<li>The number of I/O tasks. In this example there will be one I/O task for each process.</li>
<li>The stride (1 in this case).</li>
<li>The index of the first I/O task.</li>
<li>The iotype, specifying the flavor of netCDF to use.</li>
<li>Specify the subset rearranger.</li>
<li>A pointer that will get the ID of the ParallelIO system created for this call. This ID will be needed when reading or writing to the file using the ParallelIO library.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a99f208f9220635e6aa1669bb63ff111a" name="a99f208f9220635e6aa1669bb63ff111a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99f208f9220635e6aa1669bb63ff111a">&#9670;&#160;</a></span>epc_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_new </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verbose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an examplePioClass object. </p>
<p>This function allocates memory for the struct that contains the code and data for this example. Then pointers are to the functions used in the example.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">verbose</td><td>Non-zero for output to stdout. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acfe373d2faa04cd502508c82033d28b7" name="acfe373d2faa04cd502508c82033d28b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfe373d2faa04cd502508c82033d28b7">&#9670;&#160;</a></span>epc_readVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_readVar </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the example data from the file. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>This function reads the data that has been written to the sample data file. The data are read with the PIOc_read_darray() function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9875b83cce6a76ad1e55d97410ac4d2e" name="a9875b83cce6a76ad1e55d97410ac4d2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9875b83cce6a76ad1e55d97410ac4d2e">&#9670;&#160;</a></span>epc_writeVar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct examplePioClass * epc_writeVar </td>
          <td>(</td>
          <td class="paramtype">struct examplePioClass *&#160;</td>
          <td class="paramname"><em>this</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the sample data to the file. </p>
<p>This function is called as part of the creation of a sample data file for this example.</p>
<p>The data are written with the PIOc_write_darray() function. After the write is complete, ensure the file is synced for all processes after the write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">this</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main execution of code. </p>
<p>Executes the functions to:</p><ul>
<li>create a new examplePioClass instance</li>
<li>initialize MPI and the ParallelIO libraries</li>
<li>create the decomposition for this example</li>
<li>create the netCDF output file</li>
<li>define the variable in the file</li>
<li>write data to the variable in the file using decomposition</li>
<li>read the data back from the file using decomposition</li>
<li>close the file</li>
<li>clean up resources</li>
</ul>
<p>The example can be run from the command line (on system that support it) like this: </p><pre>
mpiexec -n 4 ./examplePio
</pre><p>The sample file created by this program is a small netCDF file. It has the following contents (as shown by ncdump) for a 4-processor run:</p>
<pre>
netcdf examplePio_c {
dimensions:
    x = 16 ;
variables:
    int foo(x) ;
data:

    foo = 42, 42, 42, 42, 43, 43, 43, 43, 44, 44, 44, 44, 45, 45, 45, 45 ;
}
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>argument count (should be zero) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>argument array (should be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 19 2025 11:01:53 for SCORPIO by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
